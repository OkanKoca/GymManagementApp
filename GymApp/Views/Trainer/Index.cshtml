@model List<GymApp.Models.Trainer>
@{
    ViewData["Title"] = "Eðitmenler";
}

<div class="d-flex justify-content-between align-items-center mb-4">
  <div>
   <h2 class="fw-bold"><i class="bi bi-person-badge me-2 text-success"></i>Eðitmenler</h2>
     <p class="text-muted mb-0">Uzman eðitmenlerimizle tanýþýn</p>
   </div>
 @if (User.IsInRole("Admin"))
    {
     <a class="btn btn-primary" asp-action="Create">
  <i class="bi bi-plus-circle me-1"></i> Yeni Eðitmen
        </a>
    }
</div>

@if (TempData["Success"] != null)
{
 <div class="alert alert-success alert-dismissible fade show" role="alert">
  <i class="bi bi-check-circle me-2"></i>@TempData["Success"]
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
 </div>
}

@if (!Model.Any())
{
 <div class="alert alert-info">
        <i class="bi bi-info-circle me-2"></i>Henüz kayýtlý eðitmen bulunmamaktadýr.
    </div>
}
else
{
 <!-- Filtre / Arama (Opsiyonel) -->
    <div class="row g-4">
   @foreach (var t in Model)
  {
       <div class="col-md-6 col-lg-4">
     <div class="card h-100 border-0 shadow-sm hover-card">
    <div class="card-body p-4">
     <div class="text-center mb-3">
@if (!string.IsNullOrEmpty(t.PhotoUrl))
   {
        <img src="@t.PhotoUrl" alt="@t.FullName" class="rounded-circle" style="width: 100px; height: 100px; object-fit: cover;" />
 }
      else
   {
    <div class="bg-success bg-opacity-10 rounded-circle d-inline-flex p-4">
          <i class="bi bi-person-badge text-success" style="font-size: 2.5rem;"></i>
           </div>
     }
  </div>
      <h5 class="card-title text-center fw-bold">@t.FullName</h5>
   <p class="text-center mb-2">
 <span class="badge bg-primary bg-opacity-75">@t.Expertise</span>
   </p>
       
      @if (t.ExperienceYears.HasValue)
    {
       <p class="text-center text-muted small mb-2">
     <i class="bi bi-award me-1"></i>@t.ExperienceYears yýl deneyim
   </p>
   }
         
     @if (!string.IsNullOrEmpty(t.Bio))
   {
            <p class="card-text text-muted small text-center mb-3">@(t.Bio?.Length > 100 ? t.Bio.Substring(0, 100) + "..." : t.Bio)</p>
     }

  <hr />
       
        <div class="small">
     <p class="card-text mb-2">
      <i class="bi bi-building text-primary me-2"></i>
       <strong>Salon:</strong> @(t.Gym?.Name ?? "Belirtilmemiþ")
   </p>
      
   @if (!string.IsNullOrEmpty(t.Email))
     {
 <p class="card-text mb-2">
     <i class="bi bi-envelope text-info me-2"></i>
    @t.Email
          </p>
    }
           
       @if (!string.IsNullOrEmpty(t.Phone))
     {
    <p class="card-text mb-2">
  <i class="bi bi-telephone text-success me-2"></i>
  @t.Phone
</p>
       }

  <p class="card-text mb-0">
     <i class="bi bi-calendar-check text-warning me-2"></i>
<strong>Müsaitlik:</strong>
 @if (t.Availabilities != null && t.Availabilities.Any())
   {
      <span class="badge bg-success">@t.Availabilities.Count gün</span>
       foreach (var av in t.Availabilities.Take(3))
   {
      <span class="badge bg-light text-dark ms-1">@GetDayName(av.Day)</span>
  }
     @if (t.Availabilities.Count > 3)
      {
 <span class="badge bg-secondary">+@(t.Availabilities.Count - 3)</span>
        }
   }
     else
     {
       <span class="badge bg-secondary">Belirlenmedi</span>
      }
   </p>
        </div>
     </div>
   
      <!-- Admin Butonlarý -->
     @if (User.IsInRole("Admin"))
       {
            <div class="card-footer bg-transparent border-0 text-center py-3">
    <a asp-action="Edit" asp-route-id="@t.Id" class="btn btn-sm btn-outline-primary">
        <i class="bi bi-pencil"></i> Düzenle
     </a>
<a asp-action="Delete" asp-route-id="@t.Id" class="btn btn-sm btn-outline-danger">
   <i class="bi bi-trash"></i> Sil
 </a>
     </div>
  }
      
  <!-- Üye Randevu Butonu -->
    @if (User.Identity?.IsAuthenticated == true && !User.IsInRole("Admin"))
      {
       <div class="card-footer bg-transparent border-top-0 text-center pb-3">
     <a asp-controller="Appointment" asp-action="Create" class="btn btn-success">
        <i class="bi bi-calendar-plus me-1"></i> Randevu Al
     </a>
 </div>
          }
     </div>
 </div>
        }
    </div>
}

@functions {
 string GetDayName(DayOfWeek day)
    {
return day switch
        {
        DayOfWeek.Monday => "Pzt",
DayOfWeek.Tuesday => "Sal",
            DayOfWeek.Wednesday => "Çar",
DayOfWeek.Thursday => "Per",
         DayOfWeek.Friday => "Cum",
         DayOfWeek.Saturday => "Cmt",
   DayOfWeek.Sunday => "Paz",
            _ => ""
        };
    }
}

<style>
 .hover-card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .hover-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15) !important;
    }
</style>
